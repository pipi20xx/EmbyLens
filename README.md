# EmbyLens

**å…¨èƒ½å‹ Emby åª’ä½“åº“æ·±åº¦ç®¡ç†ä¸è‡ªåŠ¨åŒ–ç»´æŠ¤å·¥å…·ç®±**

EmbyLens æ˜¯ä¸€æ¬¾ä¸“ä¸ºç§æœ‰äº‘åª’ä½“æœåŠ¡å™¨è®¾è®¡çš„ç»¼åˆç®¡ç†å¹³å°ã€‚å®ƒé›†æˆäº†å…ƒæ•°æ®å‡€åŒ–ã€æ¼”å‘˜ç»´æŠ¤ã€æ™ºèƒ½å»é‡ã€æ·±åº¦æœç´¢åŠ Webhook è”åŠ¨ç­‰å¤šé¡¹åŸå­åŒ–å·¥å…·ï¼Œæ—¨åœ¨ä¸º Emby ç”¨æˆ·æä¾›ä¸€ä¸ªé«˜æ•ˆã€é€æ˜ä¸”è‡ªåŠ¨åŒ–çš„è¿ç»´ç¯å¢ƒã€‚

---

## ğŸ› ï¸ æ ¸å¿ƒåŠŸèƒ½çŸ©é˜µ (åŸºäºåŸå­åŒ–å¯¼èˆª)

EmbyLens çš„æ¯ä¸€é¡¹åŠŸèƒ½éƒ½ä»¥ç‹¬ç«‹å·¥å…·çš„å½¢å¼å­˜åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡ä¾§è¾¹æ å¿«é€Ÿåˆ‡æ¢ï¼š

### ğŸ“Š ç®¡ç†ä»ªè¡¨ç›˜ (Dashboard)
*   **æ¦‚è§ˆç»Ÿè®¡**ï¼šç›´è§‚å±•ç¤ºåª’ä½“åº“çš„èµ„æºæ€»é‡ã€åº“æ•°é‡ã€ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ã€‚
*   **å®¡è®¡æµæ°´**ï¼šè®°å½•æœ€è¿‘çš„ç»´æŠ¤æ“ä½œï¼Œç¡®ä¿ç³»ç»Ÿå˜åŠ¨å¯è¿½æº¯ã€‚

### â™»ï¸ é‡å¤é¡¹æ¸…ç† (Dedupe Ultimate)
*   **å¤šç»´åº¦æŸ¥é‡**ï¼šç²¾å‡†è¯†åˆ«é‡å¤çš„ç”µå½±ã€å‰§é›†ã€‚
*   **æ™ºèƒ½ä¼˜é€‰**ï¼šåŸºäºåˆ†è¾¨ç‡ã€ç¼–ç ã€åŠ¨æ€èŒƒå›´è‡ªåŠ¨è¯„ä¼°ç‰ˆæœ¬ä¼˜åŠ£ã€‚
*   **å®‰å…¨åˆ é™¤**ï¼šæ”¯æŒä¸€é”®æ¸…ç†å†—ä½™æ–‡ä»¶ï¼Œé‡Šæ”¾å­˜å‚¨ç©ºé—´ï¼Œå¹¶è‡ªåŠ¨æ›´æ–° Emby ç´¢å¼•ã€‚

### ğŸ·ï¸ è‡ªåŠ¨æ ‡ç­¾åŠ©æ‰‹ (Auto Tags)
*   **è§„åˆ™å¼•æ“**ï¼šè‡ªå®šä¹‰åŒ¹é…è§„åˆ™ï¼ˆåŸºäºå›½å®¶ã€æµæ´¾ã€å¹´ä»½ï¼‰ï¼Œå…¨è‡ªåŠ¨ä¸ºåª’ä½“æ‰“ä¸Šä¸ªæ€§åŒ–æ ‡ç­¾ã€‚
*   **å®æ—¶ Webhook**ï¼šæ”¯æŒè”åŠ¨ Emby Webhookï¼Œæ–°åª’ä½“å…¥åº“æ—¶ç§’çº§å®Œæˆè‡ªåŠ¨åŒ–æ‰“æ ‡ã€‚
*   **é€æ˜å·¥ä½œæµ**ï¼šè¯¦å°½å±•ç¤º TMDB æ•°æ®æŠ“å–ä¸è§„åˆ™åŒ¹é…è¿‡ç¨‹ï¼Œæ‹’ç»é»‘ç®±æ“ä½œã€‚

### ğŸ”€ ç±»å‹æ˜ å°„ç®¡ç† (Type Manager)
*   **æ ‡ç­¾å‡€åŒ–**ï¼šå°† Emby åŸå§‹æ‚ä¹±çš„æµæ´¾ï¼ˆGenreï¼‰æ˜ å°„ä¸ºç»Ÿä¸€ã€å¹²å‡€çš„å±•ç¤ºæ ‡ç­¾ã€‚

### ğŸ§¹ åª’ä½“å‡€åŒ–æ¸…ç† (Cleanup)
*   **æ‰¹é‡å‰”é™¤**ï¼šä¸€é”®ç§»é™¤ç‰¹å®šçš„æ ‡ç­¾ã€æµæ´¾æˆ–æ— æ•ˆçš„æ¼”å‘˜ä¿¡æ¯ï¼Œä¿æŒåª’ä½“åº“æ•´æ´ã€‚

### ğŸ”’ å…ƒæ•°æ®é”å®šå™¨ (Lock Manager)
*   **çŠ¶æ€æ§åˆ¶**ï¼šæ‰¹é‡é”å®šæˆ–è§£é”åª’ä½“å­—æ®µï¼ˆå¦‚æ ‡ç­¾ã€å°é¢ï¼‰ï¼Œé˜²æ­¢ Emby æ‰«ææ—¶è¦†ç›–æ‰‹åŠ¨ä¿®æ”¹çš„å†…å®¹ã€‚

### ğŸ” é¡¹ç›®å…ƒæ•°æ®æŸ¥è¯¢ (Item Query)
*   **æ·±åº¦é€è§†**ï¼šç›´æ¥è°ƒå– Emby å†…éƒ¨åŸå§‹ JSON å“åº”ï¼Œæ–¹ä¾¿å¼€å‘è€…è°ƒè¯•ä¸æ£€æŸ¥åº•å±‚å…ƒæ•°æ®ã€‚

### ğŸ¯ å‰§é›† TMDB åæŸ¥ (Reverse Lookup)
*   **æº¯æºè¿½è¸ª**ï¼šæ ¹æ®å•é›†æ–‡ä»¶ IDï¼Œè‡ªåŠ¨å®šä½å…¶æ‰€å±å‰§é›†çš„ TMDB ç»‘å®šçŠ¶æ€ã€‚

### ğŸ” TMDB ID æ·±åº¦æœç´¢ (Deep Search)
*   **è·¨ç±»å‹ç´¢å¼•**ï¼šå…¨åº“æ‰«æåŒ¹é…æŒ‡å®š TMDB IDï¼Œæ”¯æŒå¿«é€Ÿå®šä½ç‰¹å®šèµ„æºçš„å­˜å‚¨ä½ç½®ã€‚

### ğŸ‘¤ æ¼”å‘˜ä¿¡æ¯ç»´æŠ¤ (Actor Manager)
*   **è‚–åƒä¿®æ­£**ï¼šåŸºäº TMDB æ•°æ®åº“ï¼Œæ‰¹é‡è¡¥å…¨ã€ä¿®æ­£æˆ–æ¸…ç†åª’ä½“åº“ä¸­çš„æ¼”å‘˜è‚–åƒä¸å§“åã€‚

### ğŸ”— Webhook æ¥æ”¶å™¨ (Webhook)
*   **äº‹ä»¶ç›‘å¬**ï¼šå®æ—¶æ¥æ”¶ Emby äº‹ä»¶é€šçŸ¥ï¼Œæ”¯æŒ library.new (æ–°å…¥åº“) ç­‰äº‹ä»¶çš„è‡ªåŠ¨åŒ–è§¦å‘ã€‚

---

## âš¡ å·¥ä¸šçº§æ€§èƒ½ç‰¹æ€§

-   **å…¨å¼‚æ­¥æ¶æ„**ï¼šåŸºäº `FastAPI` + `httpx` çš„å¼‚æ­¥å¼•æ“ï¼Œé«˜å¹¶å‘å¤„ç†åŒæ­¥ã€åˆ†æä¸åˆ é™¤ä»»åŠ¡ï¼ŒUI ä¸æ»‘ä¸å¡é¡¿ã€‚
-   **é€æ˜åŒ–æ—¥å¿—**ï¼šå†…ç½®å®æ—¶æ—¥å¿—æ§åˆ¶å°ï¼Œæ¯ä¸€è¡Œ API è°ƒç”¨ä¸å¤„ç†é€»è¾‘éƒ½æ¸…æ™°å¯è§ã€‚
-   **è½»é‡åŒ–éƒ¨ç½²**ï¼šæ— éœ€æ•°æ®åº“ï¼Œæ‰€æœ‰è§„åˆ™ä¸é…ç½®é€æ˜å­˜å‚¨äº JSON æ–‡ä»¶ä¸­ã€‚
-   **æ·±åº¦ TMDB é›†æˆ**ï¼šæ”¯æŒè‡ªåŠ¨åŒ–å›½å®¶ä»£ç è½¬æ¢ï¼ˆISO -> ä¸­æ–‡ï¼‰ä¸ç±»å‹ ID åŒ¹é…ã€‚

---

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

-   **å‰ç«¯**: Vue 3 (Composition API) + Vite + TypeScript + Naive UI
-   **åç«¯**: Python 3.10 + FastAPI + SQLAlchemy (Async) + httpx
-   **å›¾æ ‡**: Material Design Icons (@vicons/material)

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½² (Docker)

1.  **å¯åŠ¨æœåŠ¡**ï¼š`docker-compose up -d`
2.  **é…ç½®é›†æˆ**ï¼šå‰å¾€â€œç³»ç»Ÿè®¾ç½®â€ï¼Œå¡«å…¥ Emby URLã€API Keyã€‚
3.  **åˆ·æ–°ç´¢å¼•**ï¼šè¿›å…¥å¯¹åº”å·¥å…·ï¼ˆå¦‚é‡å¤é¡¹æ¸…ç†ï¼‰ï¼Œç‚¹å‡»â€œä» Emby åŒæ­¥â€ã€‚
4.  **å¼€å§‹ç»´æŠ¤**ï¼šæ ¹æ®éœ€è¦é€‰æ‹©å¯¹åº”çš„åŸå­åŒ–å·¥å…·è¿›è¡Œæ“ä½œã€‚

---

## ğŸ™ è‡´è°¢

æœ¬é¡¹ç›®çš„è®¾è®¡å’ŒåŠŸèƒ½å—åˆ°äº†ä»¥ä¸‹ä¼˜ç§€é¡¹ç›®çš„å¯å‘ï¼Œç‰¹æ­¤æ„Ÿè°¢ï¼š

- [kuroyukihime0/emby_scripts](https://github.com/kuroyukihime0/emby_scripts)